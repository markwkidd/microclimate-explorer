<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Microclimate_Explorer.WeatherStationPage"
             Title="Weather Stations">

    <VerticalStackLayout
        Padding="10"
        VerticalOptions="FillAndExpand">

        <HorizontalStackLayout
                Spacing="10"
                HorizontalOptions="Start">

            <VerticalStackLayout
                    Spacing="10"                 
                    VerticalOptions="Center">

                <Label  
                    Text="Data via findU/WXQA, the Citizen Weather Observer Program, NOAA, and OpenCage."
                    VerticalOptions="Center"  
                    HorizontalOptions="Start" 
                    Margin="0,0,0,0" 
                    WidthRequest="350"
                    FontFamily="Arial"
                    FontSize="18" />

                <Label 
                        Text="Active coordinates:"
                        VerticalOptions="End"  
                        HorizontalOptions="Start" 
                        Margin="0,0,0,0" 
                        WidthRequest="350"
                        FontFamily="Arial"
                        FontSize="24" />

                <Label x:Name="CoordinatesLabel" 
                        VerticalOptions="End"  
                        HorizontalOptions="Start" 
                        Margin="0,0,0,0" 
                        WidthRequest="350"
                        FontFamily="Arial"
                        FontSize="24" />

                <Button
       x:Name="BackButton"
       Text="Back"
       Clicked="OnBackButtonClicked"
       WidthRequest="300"
       HorizontalOptions="Start" />


            </VerticalStackLayout>

            <Image  
                   Source="farmstead.png"  
                   HeightRequest="185"  
                   Aspect="AspectFit"  
                   SemanticProperties.Description="friendly comic-style drawing of house, garden, and orchard" />
        </HorizontalStackLayout>

        <Border Margin="0,20,0,0" Padding="10" Stroke="LightGray">
            <VerticalStackLayout
                    Spacing="5">

                <Label 
                Text="Query live FindU database or use local test data file?"
                Style="{StaticResource SubHeadline}"
                SemanticProperties.HeadingLevel="Level2" />

                <HorizontalStackLayout
    Spacing="5">

                    <Button
                x:Name="ScrapeFindUBtn"
                Text="Query Live FindU Database" 
                Clicked="OnScrapeFindUClicked"
                HorizontalOptions="Start"
                WidthRequest="300"/>

                    <Button
                x:Name="LoadSampleDataBtn"
                Text="Query Test Data"
                Clicked="OnLoadSampleDataClicked"
                HorizontalOptions="Start"
                WidthRequest="300"/>

                </HorizontalStackLayout>
            </VerticalStackLayout>
        </Border>


        <ActivityIndicator 
                x:Name="LoadingIndicator" 
                IsRunning="False" 
                IsVisible="False" 
                HorizontalOptions="Center" />

            <CollectionView 
                x:Name="WeatherStationsCollectionView"
                ItemsSource="{Binding WeatherStations}"
                SelectionMode="Single"
                VerticalOptions="FillAndExpand">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="5" Padding="10" Stroke="LightGray">
                            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                                <Label Grid.Column="0" Grid.Row="0" Text="Station:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="0" Text="{Binding CallSign}" />

                                <Label Grid.Column="0" Grid.Row="1" Text="Temp:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="1" Text="{Binding Temperature, StringFormat='{0}Â°F'}" />

                                <Label Grid.Column="0" Grid.Row="2" Text="Wind:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="2" Text="{Binding WindSpeed, StringFormat='{0} mph'}" />

                                <Label Grid.Column="0" Grid.Row="3" Text="Humidity:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="3" Text="{Binding Humidity, StringFormat='{0}%'}" />

                                <Label Grid.Column="0" Grid.Row="4" Text="Distance:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="4" Text="{Binding Distance, StringFormat='{0} miles'}" />

                                <Label Grid.Column="0" Grid.Row="5" Text="Direction:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="5" Text="{Binding Direction}" />

                                <Label Grid.Column="0" Grid.Row="6" Text="Last update:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="6" Text="{Binding ReportAge}" />

                                <Label Grid.Column="0" Grid.Row="7" Text="Latitude:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="7" Text="{Binding Latitude}" />

                                <Label Grid.Column="0" Grid.Row="8" Text="Longitude:" FontAttributes="Bold" />
                                <Label Grid.Column="1" Grid.Row="8" Text="{Binding Longitude}" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

    </VerticalStackLayout>
</ContentPage>